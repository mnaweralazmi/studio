rules_version = '2';

service firebase.storage {
  match /b/{bucket}/o {
    
    // Rule for user-specific files (e.g., profile pictures)
    // Users can only read and write to their own folder.
    match /users/{userId}/{allPaths=**} {
      allow read, write: if request.auth != null && request.auth.uid == userId;
    }
    
    // Rule for public content (e.g., images for public topics)
    // Allow anyone to read these files.
    match /publicTopics/{allPaths=**} {
      allow read: if true;
      // Allow authenticated users to write (create/update/delete) public topic images.
      // You might want to restrict this further to admins or topic authors in firestore.rules logic.
      allow write: if request.auth != null;
    }
    
  }
}
